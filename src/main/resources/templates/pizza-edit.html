<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" />
    <meta charset="ISO-8859-1">
    <title>Modifica una Pizza</title>
</head>

<body>
	<div th:replace="navbar :: navbar"></div>
    <div class="container py-3">
        <h3>Modifica una Pizza</h3>
        <form th:action="@{/pizzas/{id}/edit(id=${pizza.id})}" th:object="${pizza}" method="post">
            <input type="hidden" th:field="*{id}" />
            
            <div class="mb-3">
                <label for="nome" class="form-label">Nome</label>
                <input type="text" th:field="*{nome}" class="form-control" id="nome">
                
                <div th:if="${#fields.hasErrors('nome')}" class="alert alert-danger mt-1">
                    <ul>
                        <li th:each="err : ${#fields.errors('nome')}" th:text="${err}"></li>
                    </ul>
                </div>
            </div>

            <div class="mb-3">
                <label for="descrizione" class="form-label">Descrizione</label>
                <input type="text" th:field="*{descrizione}" class="form-control" id="descrizione">
                
                <div th:if="${#fields.hasErrors('descrizione')}" class="alert alert-danger mt-1">
                    <ul>
                        <li th:each="err : ${#fields.errors('descrizione')}" th:text="${err}"></li>
                    </ul>
                </div>
            </div>

            <div class="mb-3">
                <label for="foto" class="form-label">URL Foto</label>
                <input type="text" th:field="*{foto}" class="form-control" id="foto">
                
                <div th:if="${#fields.hasErrors('foto')}" class="alert alert-danger mt-1">
                    <ul>
                        <li th:each="err : ${#fields.errors('foto')}" th:text="${err}"></li>
                    </ul>
                </div>
            </div>

            <div class="mb-3">
                <label for="prezzo" class="form-label">Prezzo</label>
                <input type="number" step="0.01" th:field="*{prezzo}" class="form-control" id="prezzo">
                
                <div th:if="${#fields.hasErrors('prezzo')}" class="alert alert-danger mt-1">
                    <ul>
                        <li th:each="err : ${#fields.errors('prezzo')}" th:text="${err}"></li>
                    </ul>
                </div>
            </div>
            
            <div class="mb-3">
	            <label for="ingredients" class="form-label">Ingredienti</label>
	            <div th:each="ingredient : ${ingredients}">
	                <div class="form-check">
	                    <input class="form-check-input" type="checkbox" th:value="${ingredient.id}" th:id="${'ingredient' + ingredient.id}" th:field="*{ingredients}">
	                    <label class="form-check-label" th:for="${'ingredient' + ingredient.id}" th:text="${ingredient.name}"></label>
	                </div>
	            </div>
	            
	            <div th:if="${#fields.hasErrors('ingredients')}" class="alert alert-danger mt-1">
	                <ul>
	                    <li th:each="err : ${#fields.errors('ingredients')}" th:text="${err}"></li>
	                </ul>
	            </div>
	        </div>

            <button type="submit" class="btn btn-primary">Salva Modifiche</button>
        </form>
    </div>

    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
</body>

</html>
